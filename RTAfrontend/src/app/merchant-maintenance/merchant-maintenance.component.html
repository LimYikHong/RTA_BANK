<div class="page-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h2>RTA Upload</h2>
        <ul>
            <li routerLink="/batch-list" routerLinkActive="active"><b>Upload Batch File</b></li>
            <li routerLink="/incoming-batch" routerLinkActive="active"><b>Incoming Batch File</b></li>
            <li routerLink="/profile" routerLinkActive="active">View Profile</li>
            <li routerLink="/users" routerLinkActive="active"><b>User Management</b></li>
            <li routerLink="/merchant-maintenance" routerLinkActive="active"><b>Merchant Maintenance</b></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <button class="logout-btn" (click)="logout()">Logout</button>
    <main class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-top">
                <div>
                    <h1>Merchant Maintenance</h1>
                    <p class="subtitle">Manage all registered merchants in the system.</p>
                </div>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" [(ngModel)]="searchKeyword" (keyup.enter)="onSearch()"
                    placeholder="Search by name, ID, username, email, company, or contact..." />
                <button class="btn btn-search" (click)="onSearch()">Search</button>
                <button class="btn btn-clear" *ngIf="searchKeyword" (click)="clearSearch()">Clear</button>
                <button class="btn btn-add" (click)="addMerchant()">Add Merchant</button>
            </div>
            <p class="result-count">Showing {{ filteredMerchants.length }} merchant(s)</p>
        </div>

        <!-- Loading Indicator -->
        <div class="loading-text" *ngIf="isLoading">Loading merchants...</div>

        <!-- Merchant Table -->
        <div class="table-card" *ngIf="!isLoading">
            <table *ngIf="filteredMerchants.length > 0; else noMerchants">
                <thead>
                    <tr>
                        <th>Merchant ID</th>
                        <th>Name</th>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Company</th>
                        <th>Contact</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>Joined On</th>
                        <th>Created By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let m of filteredMerchants">
                        <td class="merchant-id">{{ m.merchantId }}</td>
                        <td>{{ m.name || '-' }}</td>
                        <td>{{ m.username || '-' }}</td>
                        <td>{{ m.email || '-' }}</td>
                        <td>{{ m.company || '-' }}</td>
                        <td>{{ m.contact || '-' }}</td>
                        <td>{{ m.phone || '-' }}</td>
                        <td>{{ m.address || '-' }}</td>
                        <td>{{ m.joinedOn | date: 'mediumDate' }}</td>
                        <td>{{ m.createBy || '-' }}</td>
                    </tr>
                </tbody>
            </table>

            <ng-template #noMerchants>
                <div class="empty-state">
                    <p>No merchants found.</p>
                </div>
            </ng-template>
        </div>
    </main>
</div>
